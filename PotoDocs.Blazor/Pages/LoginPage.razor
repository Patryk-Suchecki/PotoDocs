@page "/logowanie"
@layout LoginLayout


<MudImage Src="images/logo.png" Width="320" Class="mb-8" />

<MudPaper Class="pa-8" Style="background: none; box-shadow: none;">
    <EditForm Model="@_loginModel" OnValidSubmit="SubmitAsync">

        <FluentValidationValidator />

        <MudTextField @bind-Value="_loginModel.Email"
                      Label="Adres e-mail"
                      Variant="Variant.Outlined"
                      For="@(() => _loginModel.Email)"
                      Immediate="true"
                      Disabled="@_isLoading" />

        <MudTextField @bind-Value="_loginModel.Password"
                      Label="Hasło"
                      Variant="Variant.Outlined"
                      InputType="@_passwordInputType"
                      Adornment="Adornment.End"
                      AdornmentIcon="@_passwordInputIcon"
                      OnAdornmentClick="TogglePasswordVisibility"
                      AdornmentAriaLabel="Pokaż hasło"
                      For="@(() => _loginModel.Password)"
                      Immediate="true" 
                      Disabled="@_isLoading" />

        @if (!string.IsNullOrEmpty(_errorMessage))
        {
            <MudAlert Severity="MudBlazor.Severity.Error" Class="mt-2">@_errorMessage</MudAlert>
        }

        <MudButton ButtonType="ButtonType.Submit"
                   Variant="Variant.Filled"
                   Color="Color.Primary"
                   FullWidth="true"
                   Class="mt-4"
                   Disabled="@_isLoading" >
            Logowanie
        </MudButton>

    </EditForm>
</MudPaper>

<MudImage Src="images/caranim.gif" Height="280" Class="mt-8" />